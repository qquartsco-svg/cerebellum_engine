# v0.6 구현 체크리스트

**기준선**: v0.5.0-alpha (변경 불가)  
**목표**: "소뇌가 언제, 얼마나, 왜 개입하는지"를 수치로 증명

---

## ✅ 현재 상태 확정 (변경 불가 기준선)

- [x] Cerebellum Engine v0.5.0-alpha
- [x] 단독 실행 가능
- [x] Predictive feedforward
- [x] Trial-to-trial learning
- [x] Variance reduction (tremor filter)
- [x] Hippocampus 연동
- [x] 테스트 로그로 동작 검증 완료

**👉 이 시점에서 구조 수정이나 재설계는 필요 없음**  
**👉 v0.5는 "작동 기준선(reference implementation)"으로 고정**

---

## 🎯 v0.6 필수 구현 (우선순위 순)

### ① Confidence 기반 gain 조절 (필수)

**왜?**
- 지금은 모든 correction이 동일 gain으로 들어감 → 과보정 가능성

**구현 포인트**:
```python
adaptive_gain = base_gain * confidence
```

**결과**:
- 기억이 확실할수록 강하게
- 불확실하면 소극적

**체크리스트**:
- [ ] `_get_memory_bias()`에서 confidence 추출
- [ ] `_compute_adaptive_gain()` 메서드 추가
- [ ] 각 보정 단계에 adaptive_gain 적용
- [ ] 테스트 코드 작성
- [ ] 수치 검증 (confidence 0.0 vs 1.0 비교)

---

### ② Error norm 기반 saturation (필수)

**왜?**
- 큰 오차 + feedforward + trial + variance가 겹치면 순간 과출력 가능

**구현 포인트**:
```python
scale = max_norm / (np.linalg.norm(correction) + eps)
correction *= min(1.0, scale)
```

**결과**:
- 안정성 확보
- 실기계/로봇 투입 가능

**체크리스트**:
- [ ] `CerebellumConfig`에 `max_correction_norm` 파라미터 추가
- [ ] `_saturate_correction()` 메서드 추가
- [ ] `compute_correction()` 최종 단계에 saturation 적용
- [ ] 테스트 코드 작성 (큰 오차 시나리오)
- [ ] 수치 검증 (saturation 전/후 비교)

---

### ③ Context 가중치 (중요)

**왜?**
- 같은 위치라도 "상황"이 다르면 소뇌 반응이 달라야 함

**구현 포인트**:
- context key별 weight
- tool / temperature / medium 등

**체크리스트**:
- [ ] `_compute_context_weight()` 메서드 추가
- [ ] context match score 계산
- [ ] memory gain에 context weight 곱하기
- [ ] 테스트 코드 작성
- [ ] 수치 검증 (다른 context 비교)

---

## 📊 Hovering 시나리오 수치 로그

**목적**: "반복 시행 시 variance가 실제로 줄어드는가?"

**체크해야 할 지표**:
- Trial index vs Error RMS
- Trial index vs Correction RMS
- Trial index vs Settling time

**필요한 출력**:
```
Trial 1:   RMS error = x.xxxxx, Correction RMS = y.yyyyy
Trial 50:  RMS error = x.xxxxx, Correction RMS = y.yyyyy
Trial 100: RMS error = x.xxxxx, Correction RMS = y.yyyyy
```

**체크리스트**:
- [ ] hovering_learning.py에 수치 로깅 추가
- [ ] BEFORE / AFTER 표 생성
- [ ] 개선율 계산 (Trial 1-10 vs Trial 91-100)
- [ ] 수치 검증 완료

---

## ❌ 하지 말아야 할 것

- [ ] 새로운 생물학적 이론 추가
- [ ] 해마 구조 변경
- [ ] 소뇌 기능 확장 (강화학습, NN 등)
- [ ] 자동차/우주선 통합 이야기

**👉 지금은 "이미 있는 걸 증명"하는 단계다.**

---

## 🚀 바로 다음 액션

### 오늘
- [ ] v0.6 브랜치 생성
- [ ] confidence-gain 구현
- [ ] saturation 구현

### 이번주
- [ ] hovering 시나리오에서 수치 로그 확보
- [ ] BEFORE / AFTER 표 1개 만들기

---

## 📝 최종 정리

**이 프로젝트는 막힌 게 아니다**
- 이미 엔진은 완성
- 지금은 "증명 단계"

**다음 작업은 확장이 아니라 정제다.**
- 지금 방향, 아주 정확하다.

